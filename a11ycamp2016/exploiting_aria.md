# Time to start exploiting ARIA (accessible Rich Internet Application) V1.1

Matt King, Facebook  
Slides: https://mcking65.github.io/using-aria1.1-oct2016/

* [Changes](#changes)
  * [New roles, states, and properties](#new-roles-states-and-properties)
    * [Changed Roles](#changed-roles)
    * [Changed States and Properties](#changed-states-and-properties)
  * [More subtle but consequential changes](#more-subtle-but-consequential-changes)
  * [See the specification for a list of all changes](#see-the-specification-for-a-list-of-all-changes)
* [Fundamentals](#fundamentals)
  * [What ARIA Does](#what-aria-does)
    * [Quiz!](#quiz)
    * [Caution!](#caution)
  * [Important Habits](#important-habits)
* [ARIA 1.1](#aria-11)
  * [Grid!!](#grid--)
    * [Building lists of interactive elements](#building-lists-of-interactive-elements)
      * [Quiz!](#quiz-1)
      * [Grid solves this!](#grid-solves-this)
    * [Pill list](#pill-list)
    * [Demos](#demos)

* "Yes, even though not yet final, it is time to start using ARIA 1.1!"
* "Candidate recommendation" this Thursday – this means it's now feature frozen!
* Adoption in the spring if it's approved

## Changes

Five documents related to ARIA 1.0

* Two normative specifications
  * [WAI-ARIA 1.0][aria10]
  * WAI-ARIA User Agent Implementation Guide 1.0
* Three informative notes
  * WAI-ARIA Primer
  * WAI-ARIA Roadmap
  * WAI-ARIA Authoring Practices 1.0 (never completed)

Ten active documents related to ARIA 1.1

* Four primary specifications:
  * WAI-ARIA 1.1
  * Accessible Name and Description: Computation and API Mappings 1.1
  * Core Accessibility API Mappings 1.1
  * HTML Accessibility API Mappings 1.0
* Four other module specifications:
  * Digital Publishing WAI-ARIA Module 1.0,
  * Digital Publishing Accessibility API Mappings 1.0,
  * Graphics WAI-ARIA Module 1.0,
  * SVG Accessibility API Mappings 1.0
* **Two informative notes**
  * **[WAI-ARIA Authoring Practices Guide 1.**1](https://w3c.github.io/aria-practices/)
  * **[Notes on Using ARIA in HTM**L](http://w3c.github.io/aria-in-html/)** ****(published by the HTML working group)**

[ARIA Charter](https://www.w3.org/2015/10/aria-charter.html) lists three other possible specs:

* Cognitive WAI-ARIA module
* WAI-ARIA Interaction Module
* User Context Properties

### New roles, states, and properties

8 new roles for a total of 81

1. table
2. cell
3. figure
4. term
5. none (synonym for presentation)
6. searchbox
7. switch
8. feed

13 new states and properties for a total of 48

1. aria-colcount
2. aria-colindex
3. aria-colspan
4. aria-rowcount
5. aria-rowindex
6. aria-rowspan
7. aria-current
8. aria-details
9. aria-errormessage
10. aria-keyshortcuts
11. aria-modal
12. aria-placeholder
13. aria-roledescription

#### Changed Roles

8 roles with major updates

1. application
  * Not a landmark
  * Think of it as a *last resort*, a custom widget role
2. article
  * Indexed in the context of new feed elements
3. combobox
  * Added alternative implementation pattern
  * Can also open grid, tree, and dialog
4. dialog
  * Clarified that this is only a window that does not force AT to pass through keys
  * Says nothing about the content of the dialog – it's just a container
5. document
  * Recommended only for use inside application elements
6. grid
  * Expanded recommended uses
  * Changed authoring requirements related to focus management and aria-readonly
7. region
  * Is now a landmark and requires a label
8. separator
  * If focusable, is a widget requiring aria-valuenow, aria-valuemin, and aria-valuemax, and supports aria-valuetext

#### Changed States and Properties

11 states and properties with significant changes

1. aria-activedescendant
  * Can refer to descendant of a controlled element
2. aria-autocomplete
  * Added detailed description of token values (editorial but important)
3. aria-busy
  * No longer limited to live regions
  * Improved explanation of purpose
4. aria-haspopup:
  * Was boolean – now tokens for dialog, grid, listbox, menu, and tree
5. aria-hidden
  * Removed legacy author requirement to set true on all hidden elements
6. aria-level
  * Required on heading
  * Implicit value is 2
7. aria-orientation
  * Defaults to undefined
  * Allowed on more roles
  * Implicit defaults defined for each role
8. aria-readonly
  * Support for combobox, listbox, radiogroup, slider, and spinbutton.
9. aria-posinset
  * Support for radio, tab, article in feed
10. aria-setsize
  * Support for radio, tab, article in feed
11. aria-setsize
  * Can specify unknown size with value of "-1"

Deprecating drag and drop

1. aria-dropeffect
2. aria-grabbed

### More subtle but consequential changes

Following roles now declare children presentational true

1. checkbox
2. menuitemcheckbox
3. menuitemradio
4. option
5. radio
6. switch
7. tab

This is a consequential *non-change* – these roles have always had presentational children, but authors were coding them with the exact opposite expectation.

### See the specification for a list of all changes

[Appendix C: Change Log](https://www.w3.org/TR/wai-aria-1.1/#changelog)

**CAUTION:** Read the complete list! It's chronological and several changes were made and then reversed, or postponed to a later version of ARIA.

## Fundamentals

### What ARIA Does

ARIA tells browsers what to tell assistive technologies about the purpose of your code.

**Does:** Communicates semantics, and describes provided functionality  
**Does not:** Declare or create semantics, create or cause creation of functionality

#### Quiz!

What is the practical difference between the elements below?

```
<button>Button 1</button>
<span role="button" tabindex="0">Button 2</span>
```

The span will not send any click events unless you script it.

Button 1

* Browsers automatically style it so it looks like a button
* Gets keyboard, mouse, and touch functionality
* Tells assistive technologies that it's a button

Button 2

* Because of ARIA, browsers tell assistive technologies it is a button
* Because of tabindex, browsers put it in the tab sequence
* Nothing more than that!!

#### Caution!

ARIA is powerful. Correctly used, it brings awesome accessibility to experiences where it was previously impossible! *But, incorrect application of ARIA can destroy accessibility!*

### Important Habits

1. Lean on the new [Authoring Practices Guide](http://w3c.github.io/aria-practices/)
  * It includes functional code
  * It explains what the spec means in the language of designers and developers
2. Only use ARIA you understand
3. Only ship ARIA you have tested with assistive technology

The ARIA Authoring Practices Guide is a work in progress. The safest one to rely on is the [current editor's draft](http://w3c.github.io/aria-practices/) – incomplete content is flagged in the draft.

## ARIA 1.1

### Grid!!

#### Building lists of interactive elements

Say you want to make a list of links, include a button and maybe some text with each link, and make the list a single tab stop and navigable with arrow keys. Something like the notifications dialog list in Facebook. What ARIA widget do you use?

##### Quiz!

Recall that children of elements with role option are *presentational*. What does that mean?

Since children presentational is true for option, the following…

```
<ul role="listbox">
  <li role="option">
    <a href="someURL">First link in the list</a>
    <button aria-haspopup="true">Options</button>
  </li>
  <!-- ... more of the same forever and ever -->
</ul>
```

…is the same as this to assistive technologies:

```
<ul role="listbox">
  <li role="option">
    <span>First link in the list</span>
    <span>Options</span>
  </li>
  <!-- ... more of the same forever and ever -->
</ul>
```

Presentation role means to ignore all semantics of the element and reduce it to a string or set of strings.

##### Grid solves this!

1. Cells in a grid are ARIA structures
2. That it is, they are containers that may contain anything
3. Implementations of the grid pattern provide 2-dimensional navigation
4. Grids support posinset and setsize and screen readers already announce row/column position information

ARIA 1.0 grid pattern was modeled after spreadsheet-like applications.  
ARIA 1.1 grid is also a flexible grouping container widget.

**New:** arrow keys may focus contained interactive elements like links and buttons.

If a cell contains: a single interactive element, and the element does not consume arrow keys, place focus on the element instead of the cell, making it directly operable.

#### Pill list

Each pill has two interactive parts: the pill, and the remove icon.  
The pill list is logically equivalent to a table!

#### Demos

The [ARIA Authoring Practices Guide](http://w3c.github.io/aria-practices/) has functional examples for every design pattern.

* [Examples of grids used for layout](http://w3c.github.io/aria-practices/examples/grid/LayoutGrids.html)
* [Examples of grid used to present tabular data](http://w3c.github.io/aria-practices/examples/grid/dataGrids.html)

Cool demo of how Google search results could work as a grid!
